<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>BUA 455 - Week 8</title>
    <meta charset="utf-8" />
    <meta name="author" content="Penelope Pooler Eisenbies" />
    <meta name="date" content="2024-03-05" />
    <script src="docs_files/header-attrs/header-attrs.js"></script>
    <link href="docs_files/panelset/panelset.css" rel="stylesheet" />
    <script src="docs_files/panelset/panelset.js"></script>
    <link href="docs_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="docs_files/tile-view/tile-view.js"></script>
    <script src="docs_files/xaringanExtra_fit-screen/fit-screen.js"></script>
    <link href="docs_files/tachyons/tachyons.min.css" rel="stylesheet" />
    <link href="docs_files/animate.css/animate.xaringan.css" rel="stylesheet" />
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


















background-image: url("docs_files/images/sloth_faded.png")
background-size: cover

class: bottom, right

## BUA 455 - Weeks 8 and 9

### "Dashboard Project Proposal &amp; Data Cleaning" 

&lt;br&gt;


#### Penelope Pooler Eisenbies

#### 2024-03-05

[Wikipedia Sloth Page](https://en.wikipedia.org/wiki/Sloth)

---

### BUA 455 Dashboard Group Project

#### PROPOSALS and Why They are Important

- As a data analyst, you have skills that others don't.

- In this class you are learning to acquire, combine, manage, and present data

- In MAS 261, BUA 345, BUA 451 (Advanced Analytics), and additional electives, you learn to analyze and interpret data

- These skills are unique and are useful to your colleagues and clients BUT you will spend your career (over and over) selling and explaining your skill set.

- In most cases, people you work with or work for will NOT know how your skills can help them.
  
- It is your role to help them understand:

  - what questions can be answered with data

  - what data will help them answer their questions and how to get it.
  
  - How data management and analyses can help them and may likely be essential to their goals
  
---

### Where the Proposal Process fits Wthin this course
    
- The scope of this course is precisely limited to data acquisition, management, and presentation.
  
- Within that scope, there is much that can be learned from combining data sources even without analysis.
  
- Aside from this course, you will interesting and complex analytical methods that build in these skills in other courses.
  
- The more methods and concepts you know, the better prepared you are to deal with any data you encounter.
  
- BUT...No matter how much you know, the majority of you time will be spent using the skills from this course.
  
- Depending on your work environment and position, others may be assigned time consuming repetitive data management tasks by you BUT 
  
  - You should still direct the data management and presentation work because you will be held responsible.
  
&lt;br&gt;  
    
**File management, data management, data curation, and data presentation should all complement and augment analyses**.
  
---

#### Groups Assigned

**Proposal Rough Draft - Due Thursday, 3/21, at 5:30 PM (No Grace Period)**
   
The rough draft does not need to be more than a couple paragraphs and should answer these questions:

**What data does your group plan to work with?**

- You should have an idea of your topic (okay to be unsure and/or need guidance at pre-proposal stage)

- You should have done a little exploration

- Rough draft proposal should include ***links to specific data sources that might work.***

**What questions do you think you want to answer? **

- You can start by looking at relevant financial data and other data to brainstorm ideas.

- Database searches on **Statista** might be helpful.

  - **Statista** is a great starting point, but your project should go beyond these small curated datasets.

- **Note:** If you are interested in **sports** data or **billboard music** data and don't know how to scrape data, I can help.
  - Projects that require scraping data are doable, but data management will take more time and **you should start now**.
  
---

**Proposal Final Draft - Due Tue. 4/9, at 5:30 PM - 48 Hour Grace Period**

- The final proposal draft should be 1-3 pages (double spaced, 12 pt. font). 

- In consulting, the goal of the proposal is to "sell" your skillset.

- The goal is to explain in non-technical language why your dashboard will be useful.

- You want to convince the prospective client to trust you with their data.

- It also provides a roadmap for the work you plan to do so that all group members are informed

  - List tentative goals that you hope to achieve and ideas for how to achieve them.

  - Although your client(s) are hypothetical, it helps to envision who your target client is.
    
  - How will they use the information provided in the dashboard to 
   
     - improve their marketing plan or their purchasing and staffing plan?
      
     - improve their overall investment strategy or their supply chain strategy?
      
- FINAL Proposal should **ALSO** include:

  - a preliminary descriptive list of your planned panels
  
  - what data will be presented in each panel, how will it tentatively be presented (which plots or tables)
  
  - Who is primarily responsible for each panel
        
---

### Proposals are **TENTATIVE** Agreements to do work

- Understandably, the work is not yet done, so your plans may change, which is okay.

- Your final plots and tables are not done, but it is good to have a pln for what they will be

  - It is actually better not to provide final proprietary work products at proposal stage.
  
  - Ideas and plots should be polished enough to entice client.

- A good proposal shows that you have creative ideas and have put some thought into how you can help the client.

- If possible show explicit links between each question or goal you plan to address and the possible component of the dashboard that addresses it.

&lt;br&gt;

- ***Again, it is okay if your plans change based on what you discover in the data.***

  - In real life, proposals and client goals are more concrete, but in this course, I encourage you to experiment.
  

---

### Introduction of HW 5 - Part 1 Data

#### Today: Examine and clean data

- First step is to import and examine data

- Look for quirks that might be a challenge

  - Hint: Examine `date_added` column in the .csv file or in R


```r
# import data and examine
nflx &lt;- read_csv("netflix_titles.csv", show_col_types=F) |&gt; glimpse()
```

```
## Rows: 8,807
## Columns: 12
## $ show_id      &lt;chr&gt; "s6785", "s8456", "s8595", "s8467", "s8153", "s3545", "s6…
## $ type         &lt;chr&gt; "Movie", "Movie", "Movie", "Movie", "Movie", "Movie", "Mo…
## $ title        &lt;chr&gt; "Forbidden Planet", "The Pirate Fairy", "Tinker Bell and …
## $ director     &lt;chr&gt; "Fred M. Wilcox", "Peggy Holmes", "Steve Loter", "Ron Cle…
## $ cast         &lt;chr&gt; "Leslie Nielsen, Walter Pidgeon, Anne Francis, Jack Kelly…
## $ country      &lt;chr&gt; "United States", "United States", "United States", "Unite…
## $ date_added   &lt;chr&gt; "11/1/2019", "6/15/2014", "5/17/2015", "7/16/2019", "6/23…
## $ release_year &lt;dbl&gt; 1956, 2014, 2014, 2009, 2005, 2004, 2004, 2004, 2001, 200…
## $ rating       &lt;chr&gt; "G", "G", "G", "G", "G", "G", "G", "G", "G", "G", "G", "G…
## $ duration     &lt;chr&gt; "98 min", "78 min", "78 min", "98 min", "72 min", "47 min…
## $ listed_in    &lt;chr&gt; "Action &amp; Adventure, Classic Movies, Sci-Fi &amp; Fantasy", "…
## $ description  &lt;chr&gt; "A pulp-fiction sci-fi classic, Forbidden Planet stars Le…
```

---

### Week 8 In-class Exercises (L15 - Q1)

***Session ID: bua455S24***

How many different date formats do you see in the date_added column?

&lt;br&gt;

### Week 8 In-class Exercises (L15 - Q2)

***Session ID: bua455S24***

How many different commands are required to convert the date_added column to a date variable?

---

### Cleaning These Data

#### New command for dealing with text data: `separate`

#### Review of `lubridate` commands

- Next steps:
  - Select variables 
  - use separate to split `listed_in` into 3 columns (Why?)
  - Convert `date_added` to a date variable and then create a year variable
  

```r
nflx &lt;- nflx |&gt;
  select(show_id, type, date_added, release_year, rating, listed_in) |&gt; # useful variables (subjective)

  separate(listed_in, sep=",", into=c("g1", "g2", "g3")) |&gt;         # separate out genre listings 
                                                                    # will result in lots of NAs
  mutate(date_added = mdy(date_added),                              # convert data_added to a date var
         year_added = year(date_added))                             # create a separate year var
```

---

class: middle

### Week 8 In-class Exercises (L15 - Q3)

***Session ID: bua455S24***

`separate` is the reverse of an R command we have already learned.  What command is that?

---

### Preliminary Cleaning Completed

- The previous steps are the most basic low-hanging fruit.

- Even those steps may be edited and re-edited after looking at the data more carefully.

  - Data cleaning is almost always iterative and altered for different goals.

- For example, do we need the `show_id`?  

  - As a general rule, keep unique row identifiers (or make a simpler one) until all management work is done.
  
---

### Data Exploration and Additional Cleaning

#### Finding and Removing Data with Missing Values (Depends on Subject Matter)

- Are there observations for which `year_added` is missing (`NA`)? 
   
  - **Cool trick:** `is.na(nflx$year_added)` will create a vector of `FALSE` and `TRUE` values.
   
  - `FALSE` unless the observation value is `NA`.
   
  - R interprets `FALSE` as 0 and `TRUE` as 1 so you can sum this vector to find number of missing values.
   


```r
sum(is.na(nflx$year_added))                # number of missing values (there are 10)
table(is.na(nflx$year_added))              # could also summarize with table
nflx &lt;- nflx |&gt; filter(!is.na(year_added)) # remove NA's and check again
sum(is.na(nflx$year_added))
```

```
## [1] 10
## 
## FALSE  TRUE 
##  8797    10 
## [1] 0
```

---

### Data Exploration and Additional Cleaning

#### Excluding **Rare** Categories (Depends on Subject Matter)

Are there observations for which rating is `NR` (not-rated) or `UR` (un-rated)?

- If so, we delete them because we are restricting our data to more common categories.
- Remainder of the categories can be grouped logically, but these are 'oddball' categories.



```r
table(nflx$rating) # examine categories
nflx &lt;- nflx |&gt; filter(!rating %in% c("NR", "UR"))
table(nflx$rating) # examine again after filter
```

```
## 
##        G    NC-17       NR       PG    PG-13        R    TV-14     TV-G 
##       41        3       79      287      491      799     2158      220 
##    TV-MA    TV-PG     TV-Y    TV-Y7 TV-Y7-FV       UR 
##     3209      862      306      333        6        3 
## 
##        G    NC-17       PG    PG-13        R    TV-14     TV-G    TV-MA 
##       41        3      287      491      799     2158      220     3209 
##    TV-PG     TV-Y    TV-Y7 TV-Y7-FV 
##      862      306      333        6
```

---
   
### When can you delete data?

**If you find raw uncleaned data on the internet or are given data by a client or co-worker, is it okay to delete observations?**

Yes, under certain circumstances:  

**`1.`** You must be completely transparent about how you are limiting the data and why.
  
- For example, I am limiting these data to specific time periods and specific genres.
- Other time and genre categories have too little data.
      
**`2.`** You should never delete outliers or unusual observations unless you can confirm they are errors or are not part of the data you are studying.

- I am simplifying the data by removing categories that are not of primary interest.  
- Someone else might choose different categories and limit the data differently.
- Always be transparent about data sources and all decisions you make.
   
---

### Data Exploration and Additional Cleaning

#### Modifying text or numeric variables with `ifelse`

- Numeric or text data can be converted to a categorical variable with a set of explicit `ifelse` statements.

- `ifelse` is not the ONLY way to categorize data, but it's my tool of choice.

- The input values for `ifelse` are ALWAYS the same:

  - Input 1: a test where result is `TRUE` or `FALSE`.
  - Input 2: output value if the test result is `TRUE`.
  - Input 3: output value if the test result is `FALSE`.


```r
x &lt;- seq(9,90,9)    # create var x that is a sequence of values
(d &lt;- tibble(x))    # convert x to a tibble (dataset) 
(d &lt;- d |&gt; mutate(y = ifelse(x &lt; 35, "Low", NA))) # add variable y to dataset d
(d &lt;- d |&gt; mutate(y = ifelse(x &gt;= 35 &amp; x &lt; 65, "Medium", y))) 
(d &lt;- d |&gt; mutate(y = ifelse(x &gt;= 65, "High", y)))           
```

---

### Data Exploration and Additional Cleaning

#### Modifying text multiple `ifelse` statements

- The previous example can be (and should be) condensed into one mutate statement as shown here.


```r
# create a dataset with 1 variable
x &lt;- seq(9,90,9)
d &lt;- tibble(x)
d &lt;- d |&gt; mutate(y = ifelse(x &lt; 35, "Low", NA),                         
                 y = ifelse(x &gt;= 35 &amp; x &lt; 65, "Medium", y),
                 y = ifelse(x &gt;= 65, "High", y),
                 yF = factor(y, levels = c("Low", "Medium", "High"))) |&gt; 
                              # levels option used to specify correct order
glimpse()
```

```
## Rows: 10
## Columns: 3
## $ x  &lt;dbl&gt; 9, 18, 27, 36, 45, 54, 63, 72, 81, 90
## $ y  &lt;chr&gt; "Low", "Low", "Low", "Medium", "Medium", "Medium", "Medium", "High"…
## $ yF &lt;fct&gt; Low, Low, Low, Medium, Medium, Medium, Medium, High, High, High
```

---

### Week 8 In-class Exercise

- We will examine the Netflix ratings data again and simplify the categories to reflect minimum appropriate ages.

- In this case, I have done some research on what these ratings mean.  

- In your projects, you will be expected to understand the values in your variables

  - You are likely to have to simplify your data categories for your data management goals.

- My proposed solution for these data:  

  - Categorize both TV shows and Movies into Four minimum age categories: 0, 7, 13, 17

  - Minimum Age 0: "G", "TV-G", "TV-Y"
  
  - Minimum Age 7: "PG", "TV-PG", "TV-Y7", "TV-Y7-FV"
  
  - Minimum Age 13: "PG-13", "TV-14"
  
  - Minimum Age 17: "NC-17", "TV-MA", "R"
  
---

### What we will do today:

- Together we will fill in the blanks in the R chunk below 

  - You will submit the entire chunk (with your added comments) on Blackboard in a text file.
  
  - Copy it into empty text file provided and save it with your name
  
  - This counts towards class participation for Tuesday, 3/5 and due by Monday Wednesday 3/6 at midnight.
  





```r
table(nflx$rating)
```

```
## 
##        G    NC-17       PG    PG-13        R    TV-14     TV-G    TV-MA 
##       41        3      287      491      799     2158      220     3209 
##    TV-PG     TV-Y    TV-Y7 TV-Y7-FV 
##      862      306      333        6
```

```r
# nflx &lt;- nflx |&gt;
#   mutate(min_age = ifelse(rating %in% c("G", "TV-G", "TV-Y"), 0, ____),
#          min_age = ifelse(rating %in% c("PG", "TV-PG", "TV-Y7", "TV-Y7-FV"), 7, _____),
#          min_age = ifelse(rating %in% c("PG-13", "TV-14"), ____, ____),
#          min_age = ifelse())

# table(nflx$min_age)
```

---

#### Another `ifelse` Example

- We can use a similar technique to categorize when shows or movies were first shown (released).

- This code is very similar to our simple numerical example shown previously.

- In HW 5 - Part 1(**Now Available**) you will:

  - Filter data to remove releases from before 1981
  


```r
#table(nflx$release_year)

nflx &lt;- nflx |&gt;
  mutate(release_period = ifelse(release_year &lt;= 1980, "1925-1980", NA),
         release_period = ifelse(release_year &gt; 1980 &amp; release_year &lt;= 2000, "1981-2000", release_period),
         release_period = ifelse(release_year &gt; 2000 &amp; release_year &lt;= 2005, "2001-2005", release_period),
         release_period = ifelse(release_year &gt; 2005 &amp; release_year &lt;= 2010, "2006-2010", release_period),
         release_period = ifelse(release_year &gt; 2010 &amp; release_year &lt;= 2015, "2011-2015", release_period),
         release_period = ifelse(release_year &gt; 2015, "2016-2021", release_period))

table(nflx$release_period)
```

```
## 
## 1925-1980 1981-2000 2001-2005 2006-2010 2011-2015 2016-2021 
##       130       424       297       656      1578      5630
```

---

### Cleaning Text Variables

- The code that follows **WILL NOT RUN** until the `min_age` and `release_period` variables are created (previous chunks).

- The next steps are tedious, but important, and will be different for every dataset you encounter.

- On a quiz you should know how to use these text commands: 

  - `gsub`, `str_trim`, 
  
  - `separate`, `paste`, 
  
  - `tolower`, `toupper`,
  
  - `ifelse` which is also used elsewhere
  
&lt;br&gt;
  
  - Not required but useful: use `?str_trim` to also see `str_squish` and `str_pad`
  
---

### Week 8 In-class Exercises (L16 - Q1)

***Session ID: bua455S24***

`str_trim` is used in an upcoming chunk to trim spaces before characters in some observations.

Can `gsub` also be used for this purpose?

&lt;br&gt;

### Week 8 In-class Exercises (L16 - Q2)

***Session ID: bua455S24***

Type `?tolower` into the console to bring up the help file for this command and `toupper`.

Copy and paste these lines into the console:

```
tolower("WhAT is the Result of this Command?")

toupper("WhAT is the Result of this Command?")

```

---

### Multi-step Process to clean genre

- Reshape data with `pivot_longer` and convert all text to lower case with `to_lower`

- Examine in console using this command: `cbind(table(nflx$genre))`


```r
nflx &lt;- nflx |&gt;
  select(show_id, type, year_added, release_period, min_age, g1, g2, g3) |&gt;
  pivot_longer(cols=c("g1","g2","g3"), names_to="g", values_to="genre") 
                                                 # g is a place holder

nflx &lt;- nflx |&gt; select(!g) |&gt; mutate(genre=tolower(genre)) |&gt; glimpse()
```

```
## Rows: 26,145
## Columns: 6
## $ show_id        &lt;chr&gt; "s6785", "s6785", "s6785", "s8456", "s8456", "s8456", "…
## $ type           &lt;chr&gt; "Movie", "Movie", "Movie", "Movie", "Movie", "Movie", "…
## $ year_added     &lt;dbl&gt; 2019, 2019, 2019, 2014, 2014, 2014, 2015, 2015, 2015, 2…
## $ release_period &lt;chr&gt; "1925-1980", "1925-1980", "1925-1980", "2011-2015", "20…
## $ min_age        &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…
## $ genre          &lt;chr&gt; "action &amp; adventure", " classic movies", " sci-fi &amp; fan…
```

---

### Multi-step Process to clean genre

.pull-left[

- Remove leading spaces with `str_trim`

- Examine in console using this command: `cbind(table(nflx$genre))`


```r
# remove leading space
nflx &lt;- nflx |&gt; mutate(genre = str_trim(genre))
```


]

.pull-right[

![](docs_files/images/owl.png)

]



---

### Remove Unnecessary Text

- This text is unnecessary and redundant because of `type` variable in data.

- Examine in console using this command: `cbind(table(nflx$genre))`


```r
# remove the text `movies` and `tv shows` and `tv` from genre names
nflx &lt;- nflx |&gt;
  mutate(genre = gsub(" movies", "", genre),
         genre = gsub("movies", "", genre),
         genre = gsub(" tv shows", "", genre),
         genre = gsub("tv shows", "", genre),
         genre = gsub("tv ", "", genre),
         genre = gsub(" tv", "", genre))
```

---

### Consolidate `genre` Categories using `ifelse`

- Below I am only editing and consolidating categories I plan to use.

- Examine in console using this command: `cbind(table(nflx$genre))`


```r
nflx &lt;- nflx |&gt;
  mutate(genre = ifelse(genre == "drama", "dramas", genre),
         
         genre = ifelse(genre %in% c("stand-up comedy", 
                                     "stand-up comedy &amp; talk shows"), 
                        "comedies", genre),

         genre = ifelse(genre %in% c("documentaries", "docuseries"), 
                        "docs", genre),
         
         genre = ifelse(genre %in% c("children &amp; family", "kids'"), 
                        "kids", genre),

         genre = gsub("action &amp; adventure", "action_adventr", genre))
```

---

### Filter Data to Genres of Interest

.pull-left[

- Examine in console using this command: `cbind(table(nflx$genre))`

- Examine in console using this command: `table(nflx$type, nflx$genre)`


```r
nflx &lt;- nflx |&gt;
  filter(genre %in% c("action_adventr", "comedies", "docs", 
                      "dramas", "international", "kids"))
```

]

.pull-right[

![](docs_files/images/owl.png)

]



---

### Create Final Summary Dataset

In HW 5 - Part 1, Students will create and use `nflx_mv`, the movies observations from these data.


```r
nflx &lt;- nflx |&gt;                            
  group_by(type, release_period, year_added, min_age, genre) |&gt;
  summarize(n = n()) |&gt;                   # n() tallies number of obs       
  pivot_wider(id_cols = c(type, release_period, year_added, min_age), # col. for each genre
              names_from = genre, 
              values_from = n)

nflx[is.na(nflx)] &lt;- 0                                          # why should NA's be 0 here?
nflx_tv &lt;- nflx |&gt;                                              # example dashboard  made from nflx tv
  filter(type == "TV Show") 

# nflx_mv &lt;- 
```

---

### Tuesday (3/26) Short group meetings with me

.pull-left[

- I will post a schedule (randomly assigned)

- After reading your submitted pre-proposal I will:

  - Ask your group questions 
  
  - Provide feedback to guide you towards good data and a good plan 
  
  - Answer question you might have before you write your final proposal.

]

.pull-right[

![](docs_files/images/owl.png)

]


  
---

background-image: url("docs_files/images/tired_panda_faded.png")
background-size: cover


.pull-left[

### **Key Points from Week 8**

.bg-azure.b--dark_cyan.ba.bw2.br3.shadow-5.ph2[

**Group Dashboard Project**

- Project Proposals: 
  - Rough Draft due Thu. 3/21 at 5:30 PM
  - Proposal Group Meetings Tue 3/26 in class
  - Final Draft due Tue. 4/9 at 5:30 PM

- Data Exploration and Cleaning

  - Iterative process
  - Involves some subjectivity
  - Always be transparent 
  - Carefully document choices

- Introduction to HW 5 - Part 1
  - Due Wed. 3/27 at midnight
  - Grace Period Ends Fri. 3/29
  
- Quiz 2 on Thu. 4/4

]

]

.pull-right[


.bg-azure.b--dark_cyan.ba.bw2.br3.shadow-5.ph3[
You may submit an 'Engagement Question' about each lecture until midnight on the day of the lecture. **A minimum of four submissions are required during the semester.**
]


]



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%/%total%",
"highlightStyle": "tomorrow-night-bright",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true,
"keep_md": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
